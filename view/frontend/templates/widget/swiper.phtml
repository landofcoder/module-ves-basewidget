<?php
    $id = "ves_widgets_swiper_".rand().time();
    $title = $this->getConfig("title", "");
    $freemode = $this->getConfig("freemode");
    $loop = $this->getConfig("loop");
    $stylecls = $this->getConfig("stylecls");
    $slider_height = (int)$this->getConfig("slider_height",0);
?>
<?php if($items = $this->getDataItems() ): ?>
<div id="<?= $id; ?>" class="ves-widget widget-swiper block <?= $this->getConfig("addition_cls"); ?> <?php if (isset($stylecls)&&$stylecls) echo 'block-'.$stylecls;?>">
    <?php if( $title != '' && !$title){ ?>
    <div class="block-title">
        <h3><span><?= $title; ?></span></h3>
    </div>
    <?php } ?>
    <div class="widget-inner block-content">
<!-- Swiper -->
    <div class="swiper-container slider banners masterslider" <?= $slider_height?' style="height:'.$slider_height.'px;"':'';?>>
        <div class="swiper-wrapper">
            <?php foreach($items as $item): ?>
                <div class="swiper-slide <?= ($item['size'])?'swiper-slide-'.$item['size']:''; ?>" <?= $slider_height?' style="height:'.$slider_height.'px;"':'';?>><div class="slide-inner"><?= $item['content']; ?></div></div>
            <?php endforeach; ?>
        </div>
        <?php if($this->getConfig("show_pagination")): ?>
        <!-- Add Pagination -->
        <div class="swiper-pagination"></div>
        <?php endif; ?>
        <?php if($this->getConfig("show_navigator")): ?>
         <!-- If we need navigation buttons -->
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
        <?php endif; ?>
        <?php if($this->getConfig("show_scrollbar")): ?>
        <!-- If we need scrollbar -->
        <div class="swiper-scrollbar"></div>
        <?php endif; ?>
    </div>
<!-- Initialize Swiper -->
    </div>
</div>
<script type="text/javascript">
require([
        'jquery',
        'Ves_BaseWidget/js/swiper/swiper.min'
        ],function($, Swiper){
            if($("#<?= $id; ?>").length > 0) {
                var swiper = new Swiper('#<?= $id; ?> .swiper-container', {
                    pagination: {
                        el: '.swiper-pagination',
                        clickable: true,
                    },
                    navigation: {
                        nextEl: '.swiper-button-next',
                        prevEl: '.swiper-button-prev',
                    },
                    });
            }
        });
</script>
<?php endif; ?>
